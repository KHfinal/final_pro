<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="post">
	<insert id="insertPost" parameterType="post">
		INSERT INTO POST(POST_NO, POST_WRITER, POST_CONTENTS, PRIVACY_BOUND, POST_DATE)
		VALUES(seq_post_no.nextval, #{postWriter}, #{postContents}, #{privacyBound}, systimestamp)
		<selectKey keyProperty="postNo" resultType="_int" order="AFTER">
			SELECT SEQ_POST_NO.CURRVAL FROM DUAL
		</selectKey>
	</insert>
	
	<insert id="insertAttach" parameterType="attach">
		INSERT INTO ATTACHMENT(ATTACHMENT_NO, POST_NO, ORIGINAL_FILENAME, RENAMED_FILENAME, UPLOAD_DATE)
		VALUES(seq_attachment_no.nextval, #{postNo}, #{originalFileName}, #{renamedFileName}, systimestamp)
	</insert>
</mapper>
